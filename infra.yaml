---
- name: Initial setup
  hosts: all
  roles:
    - init
  tags: init

- name: DNS
  hosts: dns_servers
  roles:
    - bind
  tags: b

- name: resolv
  hosts: all
  roles:
    - resolv

- name: prometheus
  hosts: prometheus
  roles:
    - prometheus
  tags: p

- name: Database server
  hosts: db_servers
  roles:
    - mysql
  tags: m

- name: Docker
  hosts: docker
  roles:
    - docker
  tags: docker

- hosts: web_servers
  become_user: root
  roles:
    - agama
    - nginx
  tags: agama

- name: Grafana
  hosts: grafana
  roles:
    - grafana
  tags: g

- name: Influxdb
  hosts: influxdb
  roles:
    - influxdb
    - influxdb_exporter
    - pinger
  tags: i

- name: Keepalived
  hosts: keepalived
  roles:
    - keepalived
    - haproxy
  tags: k
